---
layout: lay_post
title: "Git备忘手册"
date: 2019-08-19
categories: 工具
tags: Git
author: lvyafei
---

## 1.更新远程分支

git remote update origin -p

git push origin --delete xxx
<!--more-->

## 2.清除.idea的git缓存

git rm -r --cached .idea

## 3.Git Flow代码示例

a. 创建develop分支

```shell
git branch develop
git push -u origin develop    
```

b. 开始新Feature开发

```shell
git checkout -b some-feature develop
# Optionally, push branch to origin:
git push -u origin some-feature    

# 做一些改动    
git status
git add some-file
git commit
```

c. 完成Feature

```shell
git pull origin develop
git checkout develop
git merge --no-ff some-feature
git push origin develop

git branch -d some-feature

# If you pushed branch to origin:
git push origin --delete some-feature    
```

d. 开始Relase

```shell
git checkout -b release-0.1.0 develop

# Optional: Bump version number, commit
# Prepare release, commit
```

e. 完成Release

```shell
git checkout master
git merge --no-ff release-0.1.0
git push

git checkout develop
git merge --no-ff release-0.1.0
git push

git branch -d release-0.1.0

# If you pushed branch to origin:
git push origin --delete release-0.1.0   


git tag -a v0.1.0 master
git push --tags
```

f. 开始Hotfix

```shell
git checkout -b hotfix-0.1.1 master    
```

g. 完成Hotfix

```shell
git checkout master
git merge --no-ff hotfix-0.1.1
git push

git checkout develop
git merge --no-ff hotfix-0.1.1
git push

git branch -d hotfix-0.1.1

git tag -a v0.1.1 master
git push --tags
```

## 4.Git 打包commit内容

1.从指定位置之后开始打包

```shell
# git bundle create <打包的文件名称> <分支名> <从指定位置之后开始打包>

例如：
# git bundle create 0208commits.bundle feature/grid ^837ef2a
```

2.验证是否有共同祖先

```shell
# git bundle verify 0208commits.bundle

//检查可以导入哪些分支
# git bundle list-heads 0208commits.bundle
```

3.从包中导入提交

```shell
# git pull 0208commits.bundle feature/grid:feature/grid
```

## 5.Git 导出diff

1.打包diff内容

```
# git diff HEAD > feature_a.patch
```

2.应用diff

```
# git apply --check feature_a.patch

# git apply --whitespace=warn feature_a.patch
```

3.撤回刚才打上的那个patch

```
# git apply -R feature_a.patch
```